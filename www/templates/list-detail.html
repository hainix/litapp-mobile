<ion-view>
  <ion-nav-title>
    <span ng-if="list">
	    {{list.name}}
    </span>	  
  </ion-nav-title>
  <ion-nav-buttons side="secondary">
    <button 
	    ng-if="list"
	    class="button icon {{filterTypeIcon}}" 
	    ng-click="toggleFilter()">
      Sort
    </button>
  </ion-nav-buttons>
  <ion-header-bar 
    class="bar-subheader" 
    style="padding: 0; height: 204px;">
    <div data-tap-disabled="true">
      <gm-map 
        gm-map-id="'listMapView'" 
        gm-center="center" 
        gm-zoom="zoom" 
        gm-bounds="bounds" 
        gm-map-options="mapOptions.map"
        gm-map-type-id="mapTypeId"
        class="gm-map">
        <gm-markers 
          gm-objects="list.entries"
          gm-id="object.id"
          gm-position="{lat: object.place.latitude, lng: object.place.longitude}"
          gm-on-click="selectMapEntry(object, marker)">
        </gm-markers> 
      </gm-map>
    </div>
  </ion-header-bar>
  <ion-content>  
    <div class="center scroll" ng-hide="list">
      <div class="row">
        <div class="col center spinner-container">
		      <ion-spinner class="spinner-royal" icon="ripple"></ion-spinner>
	      </div>
	    </div>
    </div>
    <ion-list ng-hide="!list">
      <div 
	      ng-if="list.review_count" 
		    class="item item-divider list-header-subtext" 
		    style="text-align: center">
		    Based on  <b>{{list.critic_count}} Critics</b> and <b>{{list.review_count}} Reviews</b>
	    </div>
  	  <div 
	      class="lists-detail-container list-with-entries">
        <ion-item
		      ng-repeat="entry in list.entries | orderBy:listOrderField" 
		      type="item-text-wrap" 
		      ng-attr-href="{{currentStateName == 'tab.saved-list-detail' ?  '#/tab/saved/' + list.id + '/' + entry.id  : '#/tab/lists/' + list.id + '/' + entry.id }}">
          <div 
            class="list-detail-row animated-in" 
  		      style="background: url({{entry.list_item_thumbnail}}); background-position: center; background-size: cover;">
  		      <div 
              class="list-entry-position" 
              ng-if="entry.position">
  				    <h2 ng-class="(entry.position > 9) ? 'smaller-text' : ''">
  				      {{entry.position}}
              </h2>
            </div>
  		      <div class="list-detail-row-overlay">
              <h2>{{entry.name}}</h2>
    			    <p>
    	          <span 
    				      ng-if="entry.displayed_distance_from_me" 
    				      class="distance-from-me">
    				      {{entry.displayed_distance_from_me}} mi · 
    			      </span>
    			      <span
                  ng-if="entry.place && entry.place.neighborhoods">
                  {{entry.place.neighborhoods}} 
                </span>
    			      <span
                  ng-if="entry.place && entry.place.neighborhoods && entry.place.categories">
                 · 
                </span>
    			      <span
                  ng-if="entry.place && entry.place.categories">
                  {{entry.place.categories}}
                </span>
    			    </p>
  		      </div>
  		    </div>
          <ion-option-button 
      		  class="button-light" 
    		    ng-click="saveEntry(entry.id)">
            Save
          </ion-option-button>
  	    </ion-item>
      </div>
    </ion-list>
    
  </ion-content>
</ion-view>
